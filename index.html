<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Meu App PWA</title>

<!-- ============================
     ÃCONES DO PWA
============================ -->
<link rel="apple-touch-icon" href="icon-192.png">
<link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">

<!-- ============================
     MANIFEST
============================ -->
<link rel="manifest" href="manifest.json">

<meta name="theme-color" content="#0b1e39">

<style>
  body,html{
    margin:0; padding:0;
    height:100vh; width:100vw;
    overflow:hidden;
    background:#000;
    font-family: Arial;
  }

  #app{
    width:100%;
    height:100%;
    border:0;
  }

  #installBtn{
    position: fixed;
    bottom:20px;
    right:20px;
    background:#0b1e39;
    color:#fff;
    padding:12px 18px;
    border-radius:14px;
    font-weight:600;
    box-shadow:0 6px 18px rgba(0,0,0,.25);
    border:none;
    display:none;
  }
</style>
</head>
<body>

<!-- ============================
     IFRAME DO SEU SITE
============================ -->
<iframe id="app" src="https://financas.f360.com.br/"></iframe>

<button id="installBtn">Instalar App</button>

<script>
// ==============================
// PWA INSTALL BUTTON
// ==============================
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";
});

installBtn.addEventListener("click", async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  const result = await deferredPrompt.userChoice;
  if (result.outcome === "accepted") {
    installBtn.style.display = "none";
  }
  deferredPrompt = null;
});

// ==============================
// REGISTER SERVICE WORKER
// ==============================
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js")
  .then(() => console.log("SW registrado"))
  .catch(err => console.error("Erro no SW:", err));
}
</script>

</body>
</html>
